apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: cert-manager
  namespace: cert-manager
spec:
  chart:
    spec:
      chart: cert-manager
      sourceRef:
        kind: HelmRepository
        name: jetstack
      version: v1.18.2
  interval: 1h
  values:
    image:
      repository: ghcr.io/vaskozl/cert-manager-controller
      tag: 1.18.2@sha256:03ae097c41c49acf016e51e9f3cbcf4914c796acf8b00a5a0a5f1b23680c80fc
    cainjector:
      replicaCount: 1
      image:
        repository: ghcr.io/vaskozl/cert-manager-cainjector
        tag: 1.18.2@sha256:a9fd1128bc6ca73ed83714970a499cf7c673e2925a4e37c58aef6f749e89f91e
    acmesolver:
      image:
        repository: ghcr.io/vaskozl/cert-manager-acmesolver
        tag: 1.18.2@sha256:4c6ab7801a778871a8c35bb7664f2866f7ffd8523d07ffd8862c544ed314cb78
    webhook:
      image:
        repository: ghcr.io/vaskozl/cert-manager-webhook
        tag: 1.18.2@sha256:98e69bd9dd809d3a4fb8a8a67dec1510d5d964454f7c2b106d366ba12e25a1b2
    installCRDs: true
    extraArgs:
      - --dns01-recursive-nameservers=1.1.1.1:53
    podDnsPolicy: None
    podDnsConfig:
      nameservers:
        - 1.1.1.1
        - 8.8.8.8
    # Enabled once prometheus-operator is installed
    prometheus:
      enabled: false
      servicemonitor:
        enabled: false
        namespace: cert-manager
