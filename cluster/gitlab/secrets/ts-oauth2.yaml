apiVersion: v1
kind: Secret
metadata:
  name: ts-oauth2
  namespace: gitlab
type: Opaque
stringData:
  provider: |
    name: openid_connect
    label: Tailscale
    icon: "https://avatars.githubusercontent.com/u/48932923?s=48&v=4"
    args:
      name: "openid_connect"
      strategy_class: "OmniAuth::Strategies::OpenIDConnect"
      issuer: "https://idp.ide-bicolor.ts.net"
      discovery: true
      scope: ["openid","profile","email","groups"]
      client_auth_method: "basic"
      response_type: "code"
      response_mode: "query"
      uid_field: "preferred_username"
      send_scope_to_token_endpoint: "true"
      pkce: true
      client_options:
        identifier: "unused"
        secret: "unused"
        redirect_uri: "https://gitlab.sko.ai/users/auth/openid_connect/callback"
