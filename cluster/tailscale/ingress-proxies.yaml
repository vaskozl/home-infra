apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: ingress
spec:
  staticEndpoints:
    nodePort:
      ports:
      - port: 31667
        endPort: 31680
  statefulSet:
    pod:
      securityContext:
        runAsGroup: 0
        runAsUser: 0
        runAsNonRoot: false
      tailscaleContainer:
        resources:
          requests:
            cpu: 100m
            memory: 160Mi
          limits:
            memory: 160Mi
---
apiVersion: tailscale.com/v1alpha1
kind: ProxyGroup
metadata:
  name: ingress-proxies
  namespace: tailscale
spec:
  proxyClass: ingress
  type: ingress
  replicas: 3
