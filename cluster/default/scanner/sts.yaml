apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: scanner
spec:
  serviceName: scanner
  template:
    spec:
      serviceAccountName: scanner-sa
      containers:
        - name: scanner-container
          image: ghcr.io/vaskozl/wolfi-scanner:0.0.3@sha256:6e31ee9a4683409f8b3d79f5dd6a2f8e1894717271df0b14fce54cc5f2b786ad
          ports:
            - name: metrics
              containerPort: 9090
---
apiVersion: operator.victoriametrics.com/v1beta1
kind: VMPodScrape
metadata:
  name: scanner
spec:
  selector:
    matchLabels:
      app: scanner
  podMetricsEndpoints:
    - port: metrics
      path: /metrics
      interval: 300s
